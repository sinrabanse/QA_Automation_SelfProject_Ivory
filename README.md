# QA Automation Project with Playwright

This repository contains automated tests for an e-commerce website offering electronics. The project showcases end-to-end testing capabilities using Playwright for UI testing, along with integration of test case tracking via SQLite.

---

## **Project Structure**

### **Folder Structure**
```
.
├── tests
│   ├── functionality_tests
│   │   ├── sanity.spec.js
│   │   ├── filtering.spec.js
│   │   └── cart.spec.js
│   └── utils
│       └── testTracker.js
├── test_suites
│   └── functionality_suites.json
├── initDB.js
├── generateReport.js
└── README.md
```

- **`tests/`**: Contains all test files categorized into functional areas.
- **`test_suites/`**: JSON files defining test cases and suites.
- **`utils/`**: Utility scripts such as the test tracking system.
- **`initDB.js`**: Initializes the SQLite database for tracking test case statuses.
- **`generateReport.js`**: Generates a summary report of test statuses.

---

## **Technologies Used**

- **Playwright**: JavaScript/TypeScript-based framework for browser automation.
- **SQLite**: Lightweight database for tracking test case execution.
- **Node.js**: For managing dependencies and executing scripts.

---

## **Test Workflow**

### **Test Case Management**
Test cases are defined in `test_suites/functionality_suites.json`. Example structure:
```json
{
  "functionality_tests": [
    {
      "id": "TC1",
      "title": "Sanity Test",
      "steps": [
        "Open website",
        "Search for 'iPhone 16'",
        "Select the product category",
        "Select the product",
        "Select fast order",
        "Choose delivery type",
        "Fill in customer details",
        "Fill in payment details",
        "Complete payment"
      ],
      "expected_result": "A confirmation message with the order number is displayed."
    }
  ]
}
```

### **Test Case Execution**
Each test case is implemented in Playwright and dynamically tracks execution in SQLite.

**Example test (sanity.spec.js):**
```javascript
const { test, expect } = require('@playwright/test');
const { updateTestCase } = require('../utils/testTracker');

test('Sanity Test', async ({ page }) => {
  try {
    await page.goto('https://example.com');
    await page.fill('#searchbar', 'iPhone 16');
    await page.click('#search-button');
    await page.click('text=Apple iPhone 16');

    // Verification
    await expect(page).toHaveURL(/product/);

    // Mark test as passed
    updateTestCase(1, 'Passed');
  } catch (error) {
    updateTestCase(1, 'Failed', error.message);
    throw error;
  }
});
```

### **Test Case Tracking**
Tracking is implemented using SQLite, with a `test_cases` table:
- **id**: Unique identifier for each test case.
- **title**: Description of the test.
- **status**: Current status (`Not Run`, `Passed`, `Failed`).
- **last_run**: Timestamp of the last execution.
- **error_message**: Error details in case of failure.

**Utility functions (testTracker.js):**
```javascript
const Database = require('better-sqlite3');
const db = new Database('test_tracking.db');

function updateTestCase(id, status, errorMessage = null) {
  const stmt = db.prepare(`
    UPDATE test_cases
    SET status = ?, last_run = datetime('now'), error_message = ?
    WHERE id = ?
  `);
  stmt.run(status, errorMessage, id);
}

module.exports = { updateTestCase };
```

### **Report Generation**
A summary of all test cases can be generated by running:
```bash
node generateReport.js
```
Example output:
```
Test Report:
----------------------------
Test Case: Sanity Test
Status: Passed
Last Run: 2025-01-24 12:00:00

Test Case: Filtering Test
Status: Failed
Error: Element not found
Last Run: 2025-01-24 12:01:00
```

---

## **Setup Instructions**

1. **Clone the repository:**
   ```bash
   git clone <repository-url>
   cd <repository-folder>
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Initialize the database:**
   ```bash
   node initDB.js
   ```

4. **Run tests:**
   ```bash
   npx playwright test
   ```

5. **Generate report:**
   ```bash
   node generateReport.js
   ```

---

## **Limitations**

1. **Authorization and Security Testing:** Not implemented due to lack of credentials and permissions.
2. **Performance Testing:** Excluded due to lack of testing environment.
3. **Mobile Compatibility Testing:** Requires separate test cases due to differing UI.

---

## **Contributing**
Feel free to fork this repository and submit pull requests with improvements or additional tests.

---

## **License**
This project is licensed under the MIT License. See the `LICENSE` file for more details.
